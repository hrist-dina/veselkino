{"version":3,"sources":["_app.js","2_pswp.js","common.js","form.js","header.js","path.js","sales.js","scrollTo.js"],"names":["window","$","undefined","App","stack","started","sorted","scope","context","normalizeScope","sort","a","b","order","filter","some","indexOf","map","callback","call","push","use","split","trim","length","app","jQuery","PswpInit","Gallery","$pswp","eq","appendTo","$items","photos","each","i","item","$item","attr","removeData","data","size","src","w","h","$img","children","imagesLoaded","done","instance","naturalWidth","naturalHeight","splice","off","on","e","preventDefault","index","PhotoSwipe","PhotoSwipeUI_Default","history","closeOnScroll","loop","bgOpacity","init","yaCounter47451490","reachGoal","bind","$window","$headerFixed","layer","isOverlayer","beforeOpen","$layer","addClass","trigger","afterClose","removeClass","afterOpen","setTimeout","Layer","open","parallaxify","positionProperty","responsive","motionType","mouseMotionType","motionAngleX","motionAngleY","alphaFilter","adjustBasePosition","alphaPosition","useGyroscope","$maps","windowWidth","width","ymaps","ready","mapIndex","mapElement","$map","mapCenter","Map","center","zoom","controls","margin","collection","GeoObjectCollection","placemarkSettings","iconLayout","iconImageHref","iconImageSize","iconImageOffset","behaviors","disable","add","Placemark","geoObjects","stopPropagation","container","fitToViewport","one","enterFullscreen","events","enable","remove","setCenter","setDefaultMargin","useMapMargin","$shareTip","$aboutMapMarks","markIndex","mark","$mark","qtip","content","text","clone","position","my","at","target","adjust","x","y","show","solo","hide","when","event","fixed","delay","style","classes","tip","corner","api","$marks","$markTip","find","$markTipClose","$markTipShare","deviceType","mobile","viewport","effect","method","$scrolls","$connects","scrollIndex","scrollElement","$scrollElement","$scrollTrack","$connect","dataset","scroll","scrollData","resize","update","scrollWidth","scrollLeftWidth","scrollTrackWidth","outerWidth","css","hasClass","scrollLeft","scrollTrackLeft","left","$services","$servicesList","$container","$currentSlider","$button","slick","currentSlide","prevArrow","nextArrow","slidesToShow","rows","swipeToSlide","touchThreshold","centerMode","infinite","centerPadding","adaptiveHeight","breakpoint","settings","$articles","articlesSlider","$articlesList","$sections","sectionIndex","section","$section","paginatorSettings","extend","initial","step","itemIndex","itemsLength","all","Math","floor","$moreTrigger","$itemsHidden","scrollTo","axis","limit","offset","eDate","$maskedPhone","keyCode","inputmask","showMaskOnHover","val","$maskedDate","close","ScrollTrigger","toggle","visible","hidden","once","fn","fancybox","buttons","$openModal","$scrollbar","scrollbarIndex","scrollbar","SimpleBar","autoHide","$promocode","$form","$bg","ajax","url","dataType","serialize","type","success","response","error","key","$input","$field","closest","html","join","reset","$promocodeContent","promocode","$articleSliders","console","log","articleSlider","$list","speed","variableWidth","$frame","height","closeAll","document","from","header","scrollHeader","resizeHeader","$header","lastScrollTop","firstOffset","top","lastA","isFixed","isPaused","c","d","test","parseFloat","requestAnimationFrame","pageYOffset","bottom","$balloon","$balloonPaths","$start","$points","balloonHidden","$trail","correctPath","points","start","path","pathLength","resizeTimer","onMap","clearTimeout","balloon","scrollPercentage","documentElement","scrollTop","scrollHeight","clientHeight","pos","getPointAtLength","elementFromPoint","tagName","emptyMatch","empty","pointIndex","point","line","clip","forEach","createElementNS","currentPath","setAttribute","shiftX","abs","shiftY","prepend","pathBBox","getBBox","pathYEnd","getTotalLength","getBoundingClientRect","posY","sliderIndex","slider","$slider","$nav","vertical","verticalSwiping","appendArrows","$elem","$tab","$panel","siblings","end"],"mappings":"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","file":"common.js","sourcesContent":["!function(window, $, undefined){\r\n    'use strict';\r\n\r\n    class App {\r\n\r\n        constructor(){\r\n            this.stack = [];\r\n            this.started = false;\r\n            this.sorted = false;\r\n        }\r\n\r\n        use(scope, context){\r\n            scope = App.normalizeScope(scope);\r\n\r\n            if(!this.sorted){\r\n                this.stack.sort(function(a, b){\r\n                    if(a.order === b.order){\r\n                        return 0;\r\n                    }\r\n                    return a.order > b.order ? 1 : -1;\r\n                });\r\n\r\n                this.sorted = true;\r\n            }\r\n\r\n            this.stack\r\n                .filter(stack => scope.some(scope => stack.scope.indexOf(scope) > -1))\r\n                .map(stack => stack.callback.call(this, context, scope));\r\n        }\r\n\r\n        bind(scope, callback, order){\r\n            if(order === undefined){\r\n                if(callback === undefined){\r\n                    callback = scope;\r\n                    scope = ['default'];\r\n\r\n                }else if(typeof callback === 'number') {\r\n                    order = callback || 0;\r\n                    callback = scope;\r\n                    scope = ['default'];\r\n                }\r\n            }\r\n\r\n            if(order === undefined){\r\n                order = 0;\r\n            }\r\n\r\n            scope = App.normalizeScope(scope);\r\n\r\n            this.stack.push({scope, callback, order});\r\n            this.sorted = false;\r\n        }\r\n\r\n\r\n        start(){\r\n            if(this.started !== false){\r\n                return;\r\n            }\r\n\r\n            this.started = true;\r\n\r\n            $(() =>{\r\n                this.use('default');\r\n            });\r\n        }\r\n\r\n        static normalizeScope(scope){\r\n            if(typeof scope === 'string'){\r\n                scope = scope.split(' ').map(scope => scope.trim());\r\n            }\r\n\r\n            if(scope.length === 0){\r\n                scope = ['default'];\r\n            }\r\n\r\n            return scope;\r\n        }\r\n    }\r\n\r\n    window.app = new App;\r\n\r\n}(window, jQuery);\r\n","$(function(){\r\n    window.PswpInit = function (context) {\r\n        var Gallery;\r\n        var $pswp = $('[js-pswp]').eq(0);\r\n\r\n        if ( !$pswp.length ) {\r\n            $pswp = $('<div js-pswp class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"><div class=\"pswp__bg\"></div><div class=\"pswp__scroll-wrap\"><div class=\"pswp__container\"><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div></div><div class=\"pswp__ui pswp__ui--hidden\"><div class=\"pswp__top-bar\"><div class=\"pswp__counter\"></div><button class=\"pswp__button pswp__button--close\" title=\"Закрыть (Esc)\"></button><button class=\"pswp__button pswp__button--fs\" title=\"На весь экран\"></button><button class=\"pswp__button pswp__button--zoom\" title=\"Масштаб\"></button><div class=\"pswp__preloader\"><div class=\"pswp__preloader__icn\"><div class=\"pswp__preloader__cut\"><div class=\"pswp__preloader__donut\"></div></div></div></div></div><div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"><div class=\"pswp__share-tooltip\"></div></div><button class=\"pswp__button pswp__button--arrow--left\" title=\"Назад\"></button><button class=\"pswp__button pswp__button--arrow--right\" title=\"Вперёд\"></button><div class=\"pswp__caption\"><div class=\"pswp__caption__center\"></div></div></div></div></div>').appendTo($('body'));\r\n        }\r\n\r\n        var $items = $('[js-pswp-item]', context);\r\n        if ( !$items.length ) return;\r\n\r\n        var photos = [];\r\n\r\n        $items.each(function (i, item) {\r\n            var $item = $items.eq(i);\r\n            if ( !$item.attr('href').length ) {\r\n                $item.removeData('pswp-index');\r\n                return;\r\n            }\r\n\r\n            var data = {};\r\n            var size = $item.data('size');\r\n\r\n            data.src = $item.attr('href');\r\n            if ( size ) {\r\n                data.w = size.split('x')[0];\r\n                data.h = size.split('x')[1];\r\n                photos.push(data);\r\n            }\r\n            else {\r\n                var $img = $item.children('img');\r\n                if ( !$img.length ) return;\r\n\r\n                $img.imagesLoaded().done(function( instance ) {\r\n                    data.w = $img[0].naturalWidth;\r\n                    data.h = $img[0].naturalHeight;\r\n                    photos.splice(i, 0, data);\r\n                });\r\n            }\r\n\r\n            $item.data('pswp-index', i);\r\n        });\r\n\r\n        $items.off('.pswp').on({\r\n            'click.pswp': function (e) {\r\n                e.preventDefault();\r\n                var index = $(this).data('pswp-index');\r\n                if ( typeof index == 'undefined' ) return;\r\n\r\n                Gallery = new PhotoSwipe( $pswp[0], PhotoSwipeUI_Default, photos, {\r\n                    // getThumbBoundsFn: function(index) {\r\n                    //     var thumbnail = $items.eq(index).find('.article-gallery__image')[0];\r\n                    //     var pageYScroll = window.pageYOffset;\r\n                    //     var rect = thumbnail.getBoundingClientRect();\r\n                    //     return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};\r\n                    // },\r\n                    history: false,\r\n                    closeOnScroll: false,\r\n                    loop: false,\r\n                    bgOpacity: .7,\r\n                    index: index\r\n                });\r\n                Gallery.init();\r\n            }\r\n        });\r\n    };\r\n});\r\n\r\n","$(function(){\r\n\r\n    $('[js-goal-uslugi]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('buttonUslugi');\r\n    });\r\n    $('[js-goal-akcii]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('buttonAkcii');\r\n    });\r\n    $('[js-goal-novosti]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('buttonNovosti');\r\n    });\r\n    $('[js-goal-sobytiya]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('buttonSobytiya');\r\n    });\r\n    $('[js-goal-anketa]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('buttonAnketa');\r\n    });\r\n    $('[js-goal-mk]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('click_MK');\r\n    });\r\n    $('[js-goal-vopros]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('buttonVopros');\r\n    });\r\n    $('[js-goal-promokod]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('click_promokod');\r\n    });\r\n    $('[js-goal-phone]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('buttonNumber');\r\n    });\r\n    $('[js-goal-vk]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('clickVK');\r\n    });\r\n    $('[js-goal-ok]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('clickOK');\r\n    });\r\n    $('[js-goal-fb]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('clickFB');\r\n    });\r\n    $('[js-goal-insta]').on('click', function(){\r\n        if(typeof yaCounter47451490 !== 'undefined')\r\n            yaCounter47451490.reachGoal('clickINSTA');\r\n    });\r\n});\r\n\r\napp.bind('default layer', function(context){\r\n    const $window = $(window);\r\n    const $headerFixed = $('[js-headerFixed]', context);\r\n\r\n    $('[js-header-layer]', context).layer({\r\n        isOverlayer: true,\r\n        beforeOpen: function (data, $layer ) {\r\n            $headerFixed.addClass('is-hide');\r\n            $window.trigger('pauseHeader');\r\n        },\r\n        afterClose: function ($layer, data) {\r\n            $headerFixed.removeClass('is-hide');\r\n            $window.trigger('unpauseHeader');\r\n        }\r\n    });\r\n\r\n\r\n    $('[js-layer-article]', context).layer({\r\n        isOverlayer: true,\r\n        beforeOpen: function (data, $layer) {\r\n            $headerFixed.addClass('is-hide');\r\n            $window.trigger('pauseHeader');\r\n\r\n        },\r\n        afterOpen: function (data, $layer) {\r\n\r\n            app.use('showMore', $layer);\r\n\r\n            setTimeout(function(){\r\n                app.use('articleSlider', $layer);\r\n            }, 350)\r\n        },\r\n        afterClose: function () {\r\n            $headerFixed.removeClass('is-hide');\r\n            $window.trigger('unpauseHeader');\r\n        }\r\n    });\r\n\r\n\r\n    $('[js-header-open]', context).on('click', function (e) {\r\n        e.preventDefault();\r\n        Layer.open('main/header');\r\n    });\r\n\r\n    $('[js-layer-modal]', context).layer({\r\n        isOverlayer: true\r\n    });\r\n});\r\n\r\n\r\n$(function(){\r\n    $.parallaxify({\r\n        positionProperty: 'transform',\r\n        responsive: true,\r\n        motionType: 'natural',\r\n        mouseMotionType: 'gaussian',\r\n        motionAngleX: 50,\r\n        motionAngleY: 50,\r\n        alphaFilter: 0.5,\r\n        adjustBasePosition: true,\r\n        alphaPosition: 0.025,\r\n        useGyroscope: false\r\n    });\r\n});\r\n\r\n$(function () {\r\n    const $window = $(window);\r\n    const $maps = $('[js-simple-map]');\r\n    let windowWidth = $window.width();\r\n    if ( typeof ymaps === 'undefined' ) return;\r\n    ymaps.ready(function(){\r\n        $maps.each((mapIndex, mapElement) => {\r\n            const $map = $(mapElement);\r\n            let mapCenter = $map.data('coordinates');\r\n            let map = new ymaps.Map($map[0], {\r\n                center: [53.342201, 83.750318],\r\n                zoom: 16,\r\n                controls: [],\r\n                margin: windowWidth > 600 ? [50, 100, 0, 0] : 0\r\n            });\r\n            let collection = new ymaps.GeoObjectCollection();\r\n            let placemarkSettings = {\r\n                iconLayout: 'default#image',\r\n                iconImageHref: '/local/templates/veselkino/images/contacts/mark.png',\r\n                iconImageSize: [107, 94],\r\n                iconImageOffset: [-16, -94]\r\n            };\r\n\r\n            map.behaviors.disable('scrollZoom');\r\n\r\n            // collection.add(new ymaps.Placemark(mapCenter, {}, placemarkSettings));\r\n            collection.add(new ymaps.Placemark([53.342201, 83.750318], {}, placemarkSettings));\r\n\r\n            map.geoObjects.add(collection);\r\n            // ['fullscreenControl', 'zoomControl']\r\n            $map.off('.simple-map').on({\r\n                'updateMap.simple-map': function (e) {\r\n                    e.stopPropagation();\r\n\r\n                    map.container.fitToViewport();\r\n                }\r\n            });\r\n\r\n            $window.one('touchstart', (e) => {\r\n                map.behaviors.disable('drag');\r\n                $map.off('.enterFullscreen').on('click.enterFullscreen', (e) => {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    map.container.enterFullscreen();\r\n                });\r\n                map.container.events\r\n                    .add('fullscreenenter', (e) => {\r\n                        map.behaviors.enable('drag');\r\n                        map.controls.add('fullscreenControl');\r\n                        map.controls.add('zoomControl');\r\n                        $map.off('.enterFullscreen');\r\n                    })\r\n                    .add('fullscreenexit', (e) => {\r\n                        map.behaviors.disable('drag');\r\n                        map.controls.remove('fullscreenControl');\r\n                        map.controls.remove('zoomControl');\r\n                        map.setCenter(mapCenter);\r\n\r\n                        $map.off('.enterFullscreen').on('click.enterFullscreen', (e) => {\r\n                            e.preventDefault();\r\n                            e.stopPropagation();\r\n                            map.container.enterFullscreen();\r\n                        });\r\n                    });\r\n            }).on('resize', function () {\r\n                windowWidth = $window.width();\r\n\r\n                if ( windowWidth > 600 ) {\r\n                    map.margin.setDefaultMargin([50, 100, 0, 0]);\r\n                    map.setCenter([53.342201, 83.750318], 16, {\r\n                        useMapMargin: true\r\n                    });\r\n                }\r\n                else {\r\n                    map.margin.setDefaultMargin(0);\r\n                    map.setCenter([53.342201, 83.750318], 16, {\r\n                        useMapMargin: true\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    });\r\n});\r\n\r\n\r\n\r\n$(function () {\r\n    const $window = $(window);\r\n    const $shareTip = $('[js-share-tip]');\r\n\r\n    const $aboutMapMarks = $('[js-about-map-mark]');\r\n    $aboutMapMarks.each((markIndex, mark) => {\r\n        const $mark = $(mark);\r\n        $mark.qtip({\r\n            content: {\r\n                text: $shareTip.clone(true, true)\r\n            },\r\n            position: {\r\n                my: 'top right',\r\n                at: 'bottom right',\r\n                target: 'event',\r\n                adjust: {\r\n                    x: -25,\r\n                    y: 0\r\n                }\r\n            },\r\n            show: {\r\n                solo: true,\r\n                target: $mark\r\n            },\r\n            hide: {\r\n                when: {event:'mouseout unfocus'},\r\n                fixed: true,\r\n                delay: 200\r\n            },\r\n            style: {\r\n                classes: 'qtip-clean',\r\n                tip: {\r\n                    corner: false\r\n                }\r\n            },\r\n            events: {\r\n                show: function (e, api) {\r\n                    $aboutMapMarks.filter('.is-active').removeClass('is-active');\r\n                    $mark.addClass('is-active');\r\n                },\r\n                hide: function (e, api) {\r\n                    $mark.removeClass('is-active');\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    const $marks = $('[js-map-mark]');\r\n    $marks.each(function (markIndex, mark) {\r\n        const $mark = $(mark);\r\n        const $markTip = $mark.find('[js-map-mark-tip]');\r\n        const $markTipClose = $mark.find('[js-map-mark-tip-close]');\r\n        const $markTipShare = $mark.find('[js-map-mark-tip-shareFloat]');\r\n\r\n        $markTipClose.on('click', function (e) {\r\n            e.preventDefault();\r\n            $mark.qtip('hide');\r\n        });\r\n\r\n        if ( !deviceType.mobile ) {\r\n            $markTipShare.qtip({\r\n                content: {\r\n                    text: $shareTip.clone(true, true).on('mouseleave', function () {\r\n                        $markTipShare.qtip('hide');\r\n                    })\r\n                },\r\n                position: {\r\n                    my: 'top right',\r\n                    at: 'bottom right',\r\n                    target: 'event',\r\n                    adjust: {\r\n                        x: -22,\r\n                        y: -20\r\n                    }\r\n                },\r\n                show: {},\r\n                hide: {\r\n                    event: 'unfocus'\r\n                },\r\n                style: {\r\n                    classes: 'qtip-clean',\r\n                    tip: {\r\n                        corner: false\r\n                    }\r\n                },\r\n                events: {\r\n                    show: function (e, api) {},\r\n                    hide: function (e, api) {}\r\n                }\r\n            });\r\n        }\r\n\r\n        $mark.qtip({\r\n            content: {\r\n                text: $markTip\r\n            },\r\n            position: {\r\n                my: 'top right',\r\n                at: 'bottom right',\r\n                viewport: $window,\r\n                effect: false,\r\n                adjust: {\r\n                    y: -40,\r\n                    method: 'shift none'\r\n                }\r\n            },\r\n            show: {\r\n                solo: true,\r\n                event: 'click',\r\n                target: $mark\r\n            },\r\n            hide: {\r\n                event: 'unfocus'\r\n            },\r\n            style: {\r\n                classes: 'qtip-clean',\r\n                tip: {\r\n                    corner: false\r\n                }\r\n            },\r\n            events: {\r\n                show: function (e, api) {\r\n                    $mark.addClass('is-show');\r\n                },\r\n                hide: function (e, api) {\r\n                    $mark.removeClass('is-show');\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n});\r\n\r\n$(function () {\r\n    const $window = $(window);\r\n    const $scrolls = $('[js-scroll]');\r\n    const $connects = $('[js-scroll-connect]');\r\n\r\n    $scrolls.each(function (scrollIndex, scrollElement) {\r\n        const $scrollElement = $(scrollElement);\r\n        const $scrollTrack = $scrollElement.find('[js-scroll-track]');\r\n        const $connect = $connects.filter('[data-scroll=\"'+ scrollElement.dataset.scroll +'\"]');\r\n        const scrollData = {};\r\n\r\n        resize();\r\n\r\n        $connect.off('.scroll').on('scroll.scroll', function (e) {\r\n            update();\r\n        });\r\n        $window.on('resize.scroll', function (e) {\r\n            resize();\r\n        });\r\n\r\n\r\n        function resize () {\r\n            scrollData.scrollWidth = $connect[0].scrollWidth;\r\n            scrollData.scrollLeftWidth = scrollData.scrollWidth;\r\n            scrollData.scrollTrackWidth = ($connect.outerWidth() * 100) / scrollData.scrollWidth;\r\n\r\n            $scrollTrack.css({\r\n                width: scrollData.scrollTrackWidth + '%'\r\n            });\r\n\r\n            if ( scrollData.scrollTrackWidth >= 100 && !$scrollElement.hasClass('is-full') ) {\r\n                $scrollElement.addClass('is-full');\r\n                $connect.addClass('scroll-visible');\r\n            }\r\n            else if ( scrollData.scrollTrackWidth < 100 && $scrollElement.hasClass('is-full') ) {\r\n                $scrollElement.removeClass('is-full');\r\n                $connect.removeClass('scroll-visible');\r\n            }\r\n\r\n            update();\r\n        }\r\n\r\n        function update () {\r\n            scrollData.scrollLeft = $connect.scrollLeft();\r\n            scrollData.scrollTrackLeft = (scrollData.scrollLeft * 100) / scrollData.scrollLeftWidth;\r\n\r\n            $scrollTrack.css({\r\n                left: scrollData.scrollTrackLeft + '%'\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n$(function () {\r\n    const $services = $('[js-servicesList]');\r\n    const $servicesList = $services.find('[js-servicesList-list]');\r\n\r\n\r\n    $servicesList.on('init', function(event){\r\n        var $container = $(this);\r\n        var $currentSlider = $container.find('.slick-current');\r\n        var $button = $('[js-setted-text]');\r\n\r\n        var content = $currentSlider.data('text');\r\n        $button.text(content);\r\n    }).on('afterChange', function(slick, currentSlide){\r\n        var $container = $(this);\r\n        var $currentSlider = $container.find('.slick-current');\r\n        var $button = $('[js-setted-text]');\r\n\r\n        var content = $currentSlider.data('text');\r\n        $button.text(content);\r\n    });\r\n\r\n    $servicesList.slick({\r\n        prevArrow: '<button type=\"button\" class=\"slick-prev\"><span class=\"slick-arrow-icon\"></span></button>',\r\n        nextArrow: '<button type=\"button\" class=\"slick-next\"><span class=\"slick-arrow-icon\"></span></button>',\r\n        slidesToShow: 1,\r\n        rows: 0,\r\n        swipeToSlide: true,\r\n        touchThreshold: 30,\r\n        centerMode: true,\r\n        infinite: false,\r\n        centerPadding: '100px',\r\n        adaptiveHeight: true,\r\n        responsive: [\r\n            {\r\n                breakpoint: 750,\r\n                settings: {\r\n                    centerPadding: '25px'\r\n                }\r\n            }\r\n        ]\r\n    });\r\n});\r\n\r\n$(function () {\r\n    const $articles = $('[js-articlesSlider]');\r\n\r\n    $articles.each(function(i, articlesSlider){\r\n        const $articlesList = $(articlesSlider).find('[js-articlesSlider-list]');\r\n        $articlesList.slick({\r\n            prevArrow: '<button type=\"button\" class=\"slick-prev\"><span class=\"slick-arrow-icon\"></span></button>',\r\n            nextArrow: '<button type=\"button\" class=\"slick-next\"><span class=\"slick-arrow-icon\"></span></button>',\r\n            slidesToShow: 3,\r\n            rows: 0,\r\n            swipeToSlide: true,\r\n            touchThreshold: 30,\r\n            infinite: typeof $articlesList.data('infinite') !== 'undefined' ? $articlesList.data('infinite') : true,\r\n            adaptiveHeight: true,\r\n            responsive: [\r\n                {\r\n                    breakpoint: 1200,\r\n                    settings: {\r\n                        centerMode: true,\r\n                        centerPadding: '50px'\r\n                    }\r\n                },\r\n                {\r\n                    breakpoint: 900,\r\n                    settings: {\r\n                        slidesToShow: 2,\r\n                        centerMode: true,\r\n                        centerPadding: '50px'\r\n                    }\r\n                },\r\n                {\r\n                    breakpoint: 600,\r\n                    settings: {\r\n                        slidesToShow: 1,\r\n                        centerMode: true,\r\n                        centerPadding: '30px'\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n    });\r\n});\r\n\r\napp.bind('default showMore', function(context){\r\n    const $sections = $('[js-articles-section]', context);\r\n\r\n    $sections.each((sectionIndex, section) => {\r\n        const $section = $(section);\r\n        let paginatorSettings =  $.extend({\r\n            initial: 3,\r\n            step: 6,\r\n            section: $section.data('section') || 'base',\r\n        }, $section.data('paginator'));\r\n        const $items = $section.find('[js-articles-section-item]').filter((itemIndex, item)=> $(item).data('section') == paginatorSettings.section);\r\n        let itemsLength = $items.length;\r\n        let all = false;\r\n\r\n        if ( itemsLength >= paginatorSettings.step + Math.floor(paginatorSettings.step/2 - 1) ) {\r\n            const $moreTrigger = $section.find('[js-articles-section-more]').filter((itemIndex, item)=> $(item).data('section') == paginatorSettings.section);\r\n            let $itemsHidden = $items.filter(function (i, item) {\r\n                return i > (paginatorSettings.initial - 1);\r\n            }).addClass('is-hide');\r\n\r\n\r\n            $moreTrigger.off('.articles-more').on({\r\n                'click.articles-more': function (e) {\r\n                    e.preventDefault();\r\n                    if(!all){\r\n                        $itemsHidden.filter(function (i, item) {\r\n                            return i < paginatorSettings.step;\r\n                        }).removeClass('is-hide');\r\n                        $itemsHidden = $itemsHidden.filter('.is-hide');\r\n\r\n                        if ($itemsHidden.length <= Math.floor(paginatorSettings.step/2)) {\r\n                            // $moreTrigger.remove();\r\n                            all = true;\r\n                            $itemsHidden.removeClass('is-hide');\r\n                            $moreTrigger.find('.button__title').text('Свернуть');\r\n                        }\r\n\r\n                    }else{\r\n                        all = false;\r\n                        $itemsHidden = $items.filter(function (i, item) {\r\n                            return i > (paginatorSettings.initial - 1);\r\n                        }).addClass('is-hide');\r\n\r\n                        if(!$section.attr('data-tabby')){\r\n                            $.scrollTo($(\"[js-scroll-block][data-end='7']\"),1000,{axis: 'y', limit: false, offset: -80});\r\n                        }else {\r\n                            $.scrollTo($(\"[js-scroll-block][data-end='2']\"),1000,{axis: 'y', limit: false, offset: -80});\r\n                        }\r\n                        $moreTrigger.find('.button__title').text('Показать ещё');\r\n\r\n                    }\r\n\r\n\r\n                    $section.trigger('pathUpdate');\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            $section.find('[js-articles-section-more]').filter((itemIndex, item)=> $(item).data('section') == paginatorSettings.section).remove();\r\n        }\r\n\r\n        $section.on('tabChanged', function (e, eDate) {\r\n            $section.trigger('pathUpdate');\r\n        });\r\n    });\r\n});\r\n\r\n\r\n$(function(){\r\n    let $maskedPhone = $('[data-masked=\"phone\"]');\r\n    $maskedPhone.on('keydown', function(e){\r\n        if(  e.keyCode == 13 || e.keyCode == 48 || e.keyCode == 49 || e.keyCode == 50 || e.keyCode == 51 || e.keyCode == 52 || e.keyCode == 53 || e.keyCode == 54\r\n            || e.keyCode == 55 || e.keyCode == 56 || e.keyCode == 57 || e.keyCode == 96 || e.keyCode == 97 || e.keyCode == 98 || e.keyCode == 99\r\n            || e.keyCode == 100 || e.keyCode == 101 || e.keyCode == 102 || e.keyCode == 103 || e.keyCode == 104 || e.keyCode == 105 || e.keyCode == 116\r\n        ){\r\n            $maskedPhone.inputmask(\"+7 (999) 999-99-99\", {showMaskOnHover: false});\r\n        }else{\r\n            return false;\r\n        }\r\n\r\n    });\r\n    $maskedPhone.on('keydown', function(e){\r\n        if(e.keyCode == 8){\r\n            $maskedPhone.inputmask('remove');\r\n            $maskedPhone.val('');\r\n        }\r\n    });\r\n    $maskedPhone.on('focusout', function(){\r\n        /*if($maskedPhone.val() == ''){\r\n            $maskedPhone.inputmask('remove');\r\n            $maskedPhone.val('');\r\n            $maskedPhone.closest('label').removeClass('is-filled');\r\n        }*/\r\n    });\r\n    let $maskedDate = $('[data-masked=\"date\"]');\r\n    $maskedDate.on('keydown', function(e){\r\n        if(e.keyCode == 13 || e.keyCode == 48 || e.keyCode == 49 || e.keyCode == 50 || e.keyCode == 51 || e.keyCode == 52 || e.keyCode == 53 || e.keyCode == 54\r\n            || e.keyCode == 55 || e.keyCode == 56 || e.keyCode == 57 || e.keyCode == 96 || e.keyCode == 97 || e.keyCode == 98 || e.keyCode == 99\r\n            || e.keyCode == 100 || e.keyCode == 101 || e.keyCode == 102 || e.keyCode == 103 || e.keyCode == 104 || e.keyCode == 105 || e.keyCode == 116\r\n        ){\r\n            $maskedDate.inputmask(\"99.99.9999\", {showMaskOnHover: false});\r\n        }else{\r\n            return false;\r\n        }\r\n    });\r\n    $maskedDate.on('keydown', function(e){\r\n        if(e.keyCode == 8){\r\n            $maskedDate.inputmask('remove');\r\n            $maskedDate.val('');\r\n        }\r\n    });\r\n});\r\n\r\n\r\n$(function(){\r\n    $('[js-notify]').on(\"click\", function(e) {\r\n\r\n        Layer.close('main/modal',{});\r\n        Layer.open('main/notification');\r\n        return false;\r\n    });\r\n});\r\n\r\n$(function(){\r\n    if(!deviceType.mobile){\r\n        var trigger = new ScrollTrigger({\r\n            toggle: {\r\n                visible: 'is-visible',\r\n                hidden: 'is-invisible'\r\n            },\r\n            offset: {\r\n                x: -1000,\r\n                y: 0\r\n            },\r\n            once: true\r\n        });\r\n    }\r\n\r\n\r\n    // $(window).load(function(){\r\n        setTimeout (\"$('.intro__bg-city').addClass('is-visible');\",500);\r\n        setTimeout (\"$('.intro__bg-balloon_main').addClass('is-visible');\",1500);\r\n        setTimeout (\"$('.intro__bg-balloon_text').addClass('is-visible');\",1500);\r\n        setTimeout (\"$('.intro__bg-balloon_pink').addClass('is-visible');\",1800);\r\n        setTimeout (\"$('.intro__bg-balloon_colored').addClass('is-visible');\",2500);\r\n        setTimeout (\"$('.intro__bg-balloon_white-large').addClass('is-visible');\",2550);\r\n        setTimeout (\"$('.intro__bg-balloon_white-medium').addClass('is-visible');\",2570);\r\n        setTimeout (\"$('.intro__bg-balloon_white-small').addClass('is-visible');\",2590);\r\n        setTimeout (\"$('.intro__bg-balloon_white-xsmall').addClass('is-visible');\",2610);\r\n    // });\r\n});\r\n\r\n\r\n\r\napp.bind('default fancybox', function(context){\r\n    if ( $.fn.fancybox ) {\r\n        $('[js-fancybox]', context).fancybox({\r\n            loop: true,\r\n            buttons: [\r\n                \"zoom\",\r\n                \"thumbs\",\r\n                \"fullScreen\",\r\n                \"close\"\r\n            ]\r\n        });\r\n    }\r\n});\r\n\r\n\r\n$(function(){\r\n    let $openModal = $('[js-start-open-modal]');\r\n    if ($openModal) {\r\n        if ($openModal.data('modal')) {\r\n            setTimeout(function(){\r\n                Layer.open($openModal.data('modal'));\r\n            }, 170);\r\n        }\r\n    }\r\n});\r\n\r\n$(function(){\r\n    let $scrollbar = $('[js-scrollbar]');\r\n    if ( !$scrollbar.length ) return;\r\n\r\n    $scrollbar.each(function(scrollbarIndex, scrollbar) {\r\n        new SimpleBar(scrollbar, { autoHide: false });\r\n    });\r\n});\r\n\r\n\r\n$(function(){\r\n    const $promocode = $('[js-promocode]');\r\n\r\n    $promocode.each(function() {\r\n        const $form = $(this);\r\n        //const $button = $form.find('[js-promocode-button]');\r\n        const $bg = $form.find('[js-promocode-bg]');\r\n\r\n        /*$button.on('click', function(){\r\n            if(!$bg.hasClass('is-active')) {\r\n                $bg.addClass('is-active');\r\n            }\r\n\r\n            return;\r\n        });*/\r\n\r\n\r\n\r\n        $form.on('submit', function(e){\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            $form.find('.field.is-error').removeClass('is-error');\r\n\r\n            $.ajax({\r\n                url: $form.attr('action'),\r\n                dataType: 'json',\r\n                data: $form.serialize(),\r\n                type: 'post',\r\n                success: function(response){\r\n                    if(response.error){\r\n                        for(let key in response.error){\r\n                            const $input = $form.find(`[name=\"${key}\"]`);\r\n                            const $field = $input.closest('.field').addClass('is-error');\r\n                            $field.find('.field__error').html(response.error[key].join('; '));\r\n                        }\r\n                    } else if(response.success){\r\n                        //$form.trigger('layer-close');\r\n                        $form[0].reset();\r\n\r\n                        const $promocodeContent = $form.find(`[js-promocode-content]`);\r\n                        $promocodeContent.html(response.promocode);\r\n\r\n                        if(!$bg.hasClass('is-active')) {\r\n                            $bg.addClass('is-active');\r\n                        }\r\n                        //Layer.close('main/modal',{});\r\n                        //Layer.open('main/notification');\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n\r\n    });\r\n});\r\n\r\n\r\napp.bind('default articleSlider', function(context){\r\n    const $articleSliders = $('[js-article-slider]', context);\r\n    const $window = $(window);\r\n    console.log(context)\r\n\r\n\r\n    $articleSliders.off('[js-article-slider]').each(function(i, articleSlider) {\r\n        const $list = $(articleSlider).find('[js-article-slider-list]');\r\n        const $item = $(articleSlider).find('[js-article-slider-item]');\r\n\r\n\r\n        if ( $list.data('slicked') ) {\r\n            $list.slick('unslick');\r\n        }\r\n\r\n        $window.on('resize', function(){\r\n            $list.slick('setPosition');\r\n        });\r\n\r\n        $list.data('slicked', true).slick({\r\n            prevArrow: '<button type=\"button\" class=\"slick-prev\"><span class=\"slick-arrow-icon\"></span></button>',\r\n            nextArrow: '<button type=\"button\" class=\"slick-next\"><span class=\"slick-arrow-icon\"></span></button>',\r\n            rows: 0,\r\n            speed: 400,\r\n            slidesToShow: 1,\r\n            variableWidth: true,\r\n            swipeToSlide: true,\r\n            centerMode: true,\r\n            infinite: false,\r\n            centerPadding: '0px',\r\n            adaptiveHeight: true,\r\n            responsive: [\r\n                {\r\n                    breakpoint: 850,\r\n                    settings: {\r\n                        centerMode: false,\r\n                        variableWidth: false,\r\n                        adaptiveHeight: false\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n\r\n    });\r\n\r\n});\r\n\r\n\r\n$(function(){\r\n    $('[js-article-video-play]').on('click', function(){\r\n        let $frame = $(this),\r\n            $container = $frame.closest('.article-video');\r\n\r\n        $frame.html('<iframe width=\"'+$container.width()+'\" height=\"'+$container.height()+'\" src=\"//www.youtube.com/embed/'+$(this).data('video-id')+'?autoplay=1\" autoplay=\"1\" frameborder=\"0\" allowfullscreen></iframe>')\r\n    });\r\n});\r\n\r\n$(function(){\r\n    $('[js-close-modal]').on('click', function(){\r\n        Layer.closeAll();\r\n    });\r\n});\r\n\r\n$(function(){\r\n    $.ajax({\r\n        url: '/ajax/veselkino.php?action=map',\r\n        dataType: 'json',\r\n        data: {},\r\n        type: 'get',\r\n        success: function(response){\r\n            let $map = $(response.map);\r\n            $('[js-map-block]').html($map.html());\r\n            $('[js-map-img]').addClass('-desktop-hidden');\r\n        }\r\n    });\r\n});","$(function () {\r\n    $('[js-callback-form]').each(function(){\r\n        const $form = $(this);\r\n\r\n        $form.on('submit', function(e){\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            $form.find('.field.is-error').removeClass('is-error');\r\n\r\n            $.ajax({\r\n                url: $form.attr('action'),\r\n                dataType: 'json',\r\n                data: $form.serialize(),\r\n                type: 'post',\r\n                success: function(response){\r\n                    if(response.error){\r\n                        for(let key in response.error){\r\n                            const $input = $form.find(`[name=\"${key}\"]`);\r\n                            const $field = $input.closest('.field').addClass('is-error');\r\n                            $field.find('.field__error').html(response.error[key].join('; '));\r\n                        }\r\n\r\n                    } else if(response.success){\r\n                        $form.trigger('layer-close');\r\n                        $form[0].reset();\r\n                        Layer.close('main/modal',{});\r\n                        Layer.open('main/notification');\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n    });\r\n\r\n    $(document).on('click', '[js-open-layer]', function(e){\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var from = $(this).data('from');\r\n        if(from) {\r\n            setTimeout(function(){\r\n                $('[js-fos-from]').val(from);\r\n            }.bind(this), 15);\r\n        }\r\n    });\r\n\r\n});\r\n","$(function () {\r\n    // TODO: Сделать ограничение сробатывания, если мы не проскролили.\r\n    const $window = $(window);\r\n\r\n    $('[js-header]').each((i, header) => {\r\n        let scrollHeader;\r\n        let resizeHeader;\r\n        const $header = $(header);\r\n        let lastScrollTop = 0;\r\n        let firstOffset = $header.offset().top;\r\n        let lastA = $header.offset().top;\r\n        let isFixed = false;\r\n        let isPaused = false;\r\n\r\n        let a;\r\n        let b = $header.height();\r\n        let c = $window.height();\r\n        let d;\r\n        let test = 0;\r\n\r\n        $window.on('resize', (e) => {\r\n            resizeHeader();\r\n        }).on('pauseHeader', (e) => {\r\n            // isPaused = true;\r\n            setTimeout(()=>{\r\n        test = parseFloat($('.body__wrapper').css('top'));\r\n    }, 300)\r\n        }).on('unpauseHeader', (e) => {\r\n            isPaused = false;\r\n            test = 0;\r\n        }).on('load', (e) => {\r\n            resizeHeader();\r\n            window.requestAnimationFrame(scrollHeader);\r\n        });\r\n\r\n        resizeHeader = () => {\r\n            window.requestAnimationFrame(() => {\r\n                b = $header.height();\r\n                c = $window.height();\r\n            });\r\n        };\r\n\r\n        scrollHeader = () => {\r\n            if ( isPaused ) {\r\n                window.requestAnimationFrame(scrollHeader);\r\n                return;\r\n            }\r\n            d = window.pageYOffset;\r\n            // if (lastScrollTop == d) {\r\n            //     window.requestAnimationFrame(scrollHeader);\r\n            //     return;\r\n            // }\r\n            a = $header.offset().top;\r\n\r\n            if (b <= c) {\r\n                $header.css({ position: \"fixed\", top: '', bottom: '' });\r\n            }\r\n            else {\r\n                if (d > lastScrollTop) { // scroll down\r\n                    if ($header.css(\"position\") != \"fixed\" && c + d >= a + b) {\r\n                        $header.css({ position: \"fixed\", bottom: 0, top: \"auto\" });\r\n                    }\r\n                    if (a - d >= firstOffset) {\r\n                        $header.css({ position: \"absolute\", bottom: \"auto\", top: lastA });\r\n                    }\r\n                } else if (d < lastScrollTop) { // scroll up\r\n                    if (a - d >= firstOffset) {\r\n                        if ($header.css(\"position\") != \"fixed\") {\r\n                            $header.css({ position: \"fixed\", bottom: \"auto\", top: firstOffset });\r\n                        }\r\n                    } else {\r\n                        if ($header.css(\"position\") != \"absolute\") {\r\n                            $header.css({ position: \"absolute\", bottom: \"auto\", top: lastA - test });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            lastScrollTop = d;\r\n            lastA = a;\r\n\r\n            window.requestAnimationFrame(scrollHeader);\r\n        };\r\n    });\r\n});\r\n\r\n\r\n\r\n\r\n\r\n// $(function(){\r\n//     let $window = $(window);\r\n\r\n//     $('[js-header]').each((i, header) => {\r\n//         let scrollHeader;\r\n//         let e = $(header);\r\n//         let lastScrollTop = 0;\r\n//         let firstOffset = e.offset().top;\r\n//         let lastA = e.offset().top;\r\n//         let isFixed = false;\r\n\r\n//         $window.on('load', (e) => {\r\n//             $window.on('scroll', (e) => {\r\n//                 scrollHeader();\r\n//             }).trigger('scroll');\r\n//             scrollHeader();\r\n//         });\r\n\r\n//         let a;\r\n//         let b;\r\n//         let c;\r\n//         let d;\r\n\r\n//         scrollHeader = () => {\r\n//             if (isFixed) {\r\n//                 return;\r\n//             }\r\n//             a = e.offset().top;\r\n//             b = e.height();\r\n//             c = $window.height();\r\n//             d = $window.scrollTop();\r\n//             if (b <= c - a) {\r\n//                 e.css({ position: \"fixed\" });\r\n//                 isFixed = true;\r\n//                 return;\r\n//             }\r\n//             if (d >= lastScrollTop) { // scroll down\r\n//                 if (e.css(\"position\") != \"fixed\" && c + d >= a + b) {\r\n//                     e.css({ position: \"fixed\", bottom: 0, top: \"auto\" });\r\n//                 }\r\n//                 if (a - d >= firstOffset) {\r\n//                     e.css({ position: \"absolute\", bottom: \"auto\", top: lastA });\r\n//                 }\r\n//             } else { // scroll up\r\n//                 if (a - d >= firstOffset) {\r\n//                     if (e.css(\"position\") != \"fixed\") {\r\n//                         e.css({ position: \"fixed\", bottom: \"auto\", top: firstOffset });\r\n//                     }\r\n//                 } else {\r\n//                     if (e.css(\"position\") != \"absolute\") {\r\n//                         e.css({ position: \"absolute\", bottom: \"auto\", top: lastA });\r\n//                     }\r\n//                 }\r\n//             }\r\n//             lastScrollTop = d;\r\n//             lastA = a;\r\n//         };\r\n//     });\r\n// });\r\n\r\n\r\n","$(function(){\r\n    const $window = $(window);\r\n    let $map = $('[js-simple-map]');\r\n    if ( deviceType.mobile ) {\r\n        $map.addClass('is-active');\r\n        return;\r\n    }\r\n\r\n    let $balloon = $('[js-balloon]');\r\n    let $balloonPaths = $('[js-balloon-paths]');\r\n    let $start = $('[js-path-start]');\r\n    let $points = $('[js-path-point]');\r\n    let balloonHidden = false;\r\n    let $trail = $('#dotted-line');\r\n    let correctPath = '';\r\n    let points = [];\r\n    let start = {\r\n        left: $start.offset().left,\r\n        top: $start.offset().top\r\n    };\r\n    let path = $trail[0];\r\n    let pathLength = 0;\r\n    let resizeTimer = null;\r\n    let onMap = false;\r\n\r\n\r\n    update();\r\n    $window.on(\"load\", function(e) {\r\n        update();\r\n    });\r\n    $window.on(\"pathUpdate\", function(e) {\r\n        update();\r\n    });\r\n    $window.on(\"resize\", function(e) {\r\n        clearTimeout(resizeTimer);\r\n        resizeTimer = setTimeout(() => {\r\n            update();\r\n        }, 300)\r\n    });\r\n\r\n    $window.on(\"scroll\", function(e) {\r\n        balloon();\r\n    });\r\n\r\n    function balloon () {\r\n        let scrollPercentage = (document.documentElement.scrollTop) / (document.documentElement.scrollHeight - document.documentElement.clientHeight);\r\n        let pos = path.getPointAtLength(pathLength*scrollPercentage);\r\n\r\n        $balloon.css({\r\n            left: pos.x,\r\n            top: pos.y\r\n        });\r\n\r\n        if ( !onMap && document.elementFromPoint(pos.x, pos.y - document.documentElement.scrollTop) && document.elementFromPoint(pos.x, pos.y - document.documentElement.scrollTop).tagName == 'YMAPS' ) {\r\n            onMap = true;\r\n            $map.addClass('is-active');\r\n        }\r\n\r\n        if ( emptyMatch(pos.y) ) {\r\n            if ( !balloonHidden ) {\r\n                balloonHidden = true;\r\n                $balloon.addClass('is-hide');\r\n            }\r\n        }\r\n        else if ( balloonHidden ) {\r\n            balloonHidden = false;\r\n            $balloon.removeClass('is-hide');\r\n        }\r\n\r\n        if (scrollPercentage >= 0.99) {\r\n            // path.style.strokeDasharray = \"none\";\r\n\r\n        } else {\r\n            // path.style.strokeDasharray = pathLength + ' ' + pathLength;\r\n        }\r\n    }\r\n\r\n    function update () {\r\n        correctPath = '';\r\n        $balloonPaths.empty();\r\n        points = [];\r\n        start = {\r\n            left: $start.offset().left,\r\n            top: $start.offset().top\r\n        };\r\n\r\n        $points.each(function (pointIndex, point) {\r\n            points.push({\r\n                line: point.dataset.line || false,\r\n                clip: point.dataset.clip || false,\r\n                top: $(point).offset().top,\r\n                left: $(point).offset().left\r\n            });\r\n        });\r\n\r\n        points.forEach((point, pointIndex) => {\r\n            let clip = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n            let currentPath = '';\r\n            clip.setAttribute('fill', 'none');\r\n            clip.setAttribute('stroke-width', '2px');\r\n            clip.setAttribute('stroke-dasharray', '20,10');\r\n            if ( pointIndex == 0 ) {\r\n                point.shiftX = Math.abs(point.left - start.left)/2;\r\n                point.shiftY = Math.abs(point.top - start.top)/2;\r\n                point.shiftX = 300;\r\n                point.shiftY = 300;\r\n                currentPath = 'M '+ start.left +','+ start.top +'C '+ (start.left+point.shiftX) +','+ (start.top+point.shiftY) +' '+ (point.left-point.shiftX) +','+ (point.top-point.shiftY) +' '+ point.left  +','+ point.top;\r\n                clip.setAttribute('d', currentPath);\r\n                if ( point.clip ) {\r\n                    clip.setAttribute('stroke', 'none');\r\n                }\r\n                else {\r\n                    clip.setAttribute('stroke', '#60b800');\r\n                }\r\n            }\r\n            else {\r\n                point.shiftX = Math.abs(point.left - points[pointIndex-1].left)/2;\r\n                point.shiftY = Math.abs(point.top - points[pointIndex-1].top)/2;\r\n                point.shiftX = 300;\r\n                point.shiftY = 300;\r\n                if ( point.line ) {\r\n                    currentPath = 'M '+ points[pointIndex-1].left +','+ points[pointIndex-1].top +'L '+ point.left  +','+ point.top;\r\n                }\r\n                else {\r\n                    // correctPath += 'S '+ (point.left-point.shiftX) +','+ (point.top-point.shiftY) +' '+ point.left  +','+ point.top;\r\n                    currentPath = 'M '+ points[pointIndex-1].left +','+ points[pointIndex-1].top +'C '+ (points[pointIndex-1].left+points[pointIndex-1].shiftX) +','+ (points[pointIndex-1].top+points[pointIndex-1].shiftY) +' '+ (point.left-point.shiftX) +','+ (point.top-point.shiftY) +' '+ point.left  +','+ point.top;\r\n                }\r\n                clip.setAttribute('d', currentPath);\r\n                if ( point.clip ) {\r\n                    clip.setAttribute('stroke', 'none');\r\n                }\r\n                else {\r\n                    clip.setAttribute('stroke', '#60b800');\r\n                }\r\n            }\r\n\r\n            correctPath += currentPath;\r\n            point.path = clip;\r\n            $balloonPaths.prepend(clip);\r\n            point.pathBBox = clip.getBBox();\r\n            point.pathYEnd = point.pathBBox.y + point.pathBBox.height;\r\n        });\r\n\r\n        $trail.attr('d', correctPath);\r\n        pathLength = path.getTotalLength();\r\n        path.getBoundingClientRect();\r\n\r\n        balloon();\r\n    }\r\n\r\n    function emptyMatch (posY) {\r\n        return points.filter((point, pointIndex) => {\r\n            return point.clip && posY > point.pathBBox.y && posY < point.pathYEnd && posY > points[pointIndex-1].pathYEnd;\r\n        }).length > 0;\r\n    }\r\n});\r\n","$(function () {\r\n    $('[js-sales-slider]').each(function (sliderIndex, slider) {\r\n        const $slider = $(slider);\r\n        let $list = $slider.find('[js-sales-slider-list]');\r\n        let $nav = $slider.find('[js-sales-slider-nav]');\r\n\r\n        $list.slick({\r\n            vertical: true,\r\n            verticalSwiping: true,\r\n            slidesToShow: 2,\r\n            touchThreshold: 30,\r\n            appendArrows: $nav,\r\n            prevArrow: '<a js-sales-slider-nav-prev class=\"sales-slider__nav-item sales-slider__nav-item_prev\" href=\"#\"></a>',\r\n            nextArrow: '<a js-sales-slider-nav-next class=\"sales-slider__nav-item sales-slider__nav-item_next\" href=\"#\"></a>'\r\n        });\r\n    });\r\n});\r\n","$(function () {\r\n    var $container = $('[js-scroll-container]');\r\n\r\n    $container.find('[js-scroll-item]').on('click', function(e){\r\n        e.preventDefault();\r\n        var $elem = $(this);\r\n        var $item = $(\"[js-scroll-block][data-end='\" +$elem.data('scroll') + \"']\");\r\n        if($elem.data('scroll') == 3) {\r\n            var $tab = $(\"[js-tabby-tab][data-tabby='articles-sections:news']\");\r\n            var $panel = $(\"[js-tabby-panel][data-tabby='articles-sections:news']\");\r\n            $tab.siblings('.is-active').removeClass('is-active').end().addClass('is-active');\r\n            $container.find('[js-tabby-tab]').removeClass('is-active');\r\n            $container.find($tab).addClass('is-active');\r\n            $panel.siblings('.is-active').removeClass('is-active').end().addClass('is-active');\r\n            $container.find('[js-tabby-panel]').removeClass('is-active');\r\n            $container.find($panel).addClass('is-active');\r\n        }\r\n\r\n        setTimeout(function () {\r\n            $.scrollTo($item,1000,{axis: 'y', limit: false, offset: -110});\r\n        },50);\r\n\r\n\r\n    });\r\n\r\n\r\n    $('[js-menu-trigger]').on('click', function (e) {\r\n        e.preventDefault();\r\n        var $elem = $(this);\r\n        var $item = $(\"[js-scroll-block][data-end='\" +$elem.data('scroll') + \"']\");\r\n\r\n        Layer.close('main/header',{\r\n            scrollTo: $item\r\n        });\r\n        setTimeout(function () {\r\n            $.scrollTo($item,1000,{axis: 'y', limit: false, offset: -100});\r\n        },500);\r\n\r\n    });\r\n\r\n    $container.find('[js-scroll-tab]').on('click', function(e){\r\n        e.preventDefault();\r\n        var $elem = $(this);\r\n        var $item = $(\"[js-scroll-block][data-end='\" +$elem.data('scroll') + \"']\");\r\n        var $tab = $(\"[js-tabby-tab][data-tabby='\" +$elem.data('tab') + \"']\");\r\n        var $panel = $(\"[js-tabby-panel][data-tabby='\" +$elem.data('tab') + \"']\");\r\n\r\n        setTimeout(function () {\r\n            $.scrollTo($item,1000,{axis: 'y', limit: false, offset: -110});\r\n        },50);\r\n\r\n        $tab.siblings('.is-active').removeClass('is-active').end().addClass('is-active');\r\n        $container.find('[js-tabby-tab]').removeClass('is-active');\r\n        $container.find($tab).addClass('is-active');\r\n        $panel.siblings('.is-active').removeClass('is-active').end().addClass('is-active');\r\n        $container.find('[js-tabby-panel]').removeClass('is-active');\r\n        $container.find($panel).addClass('is-active');\r\n\r\n    });\r\n\r\n});\r\n\r\n\r\n\r\n"]}